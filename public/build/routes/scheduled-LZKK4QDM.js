import{a as o,b as h}from"/build/_shared/chunk-PPBDNHAV.js";import{a as n,e as m,g as p}from"/build/_shared/chunk-EFPPQYLK.js";import{d,i,l as c}from"/build/_shared/chunk-PBKUEGQN.js";import{a as y}from"/build/_shared/chunk-GLJNN66F.js";import{c as a}from"/build/_shared/chunk-Q3IECNXJ.js";var f=a(y(),1);var e=a(c(),1);var w=()=>{let{scheduled:s}=i(),[u,r]=(0,f.useState)(!1),g=async t=>{if(confirm("Are you sure you want to delete this scheduled task?")){r(!0);try{if((await fetch("/deleteScheduledTask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:t})})).ok)o.success("Scheduled task deleted successfully!"),window.location.reload();else throw new Error("Failed to delete scheduled task")}catch(l){console.error("Error deleting scheduled task:",l),o.error("Failed to delete scheduled task")}finally{r(!1)}}};return(0,e.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,e.jsx)(h,{}),(0,e.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(d,{to:"/workflows",children:(0,e.jsx)("button",{className:"flex text-white bg-blue-500 rounded-full p-2 hover:bg-blue-600 text-sm items-center gap-1 justify-center",children:(0,e.jsx)(n,{})})}),(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Scheduled Tasks"})]})}),(0,e.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:s.length===0?(0,e.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,e.jsx)("p",{children:"No scheduled tasks available."})}):s.map(t=>(0,e.jsxs)("div",{className:"flex justify-between items-center p-4 hover:bg-gray-100 border-b",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)(m,{className:"w-10 h-10 text-gray-500 mr-4"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:t.wf.name}),(0,e.jsxs)("p",{className:"text-gray-600",children:["Trigger: ",t.wf.trigger]}),(0,e.jsxs)("p",{className:"text-gray-600",children:["Action: ",t.wf.action]}),(0,e.jsxs)("p",{className:"text-gray-600",children:["Will be triggered at: ",new Date(t.dt).toLocaleString("en-US",{dateStyle:"short",timeStyle:"short"})]})]})]}),(0,e.jsx)("div",{className:"flex items-center gap-2",children:u?(0,e.jsxs)("svg",{className:"animate-spin h-5 w-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,e.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,e.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):(0,e.jsx)(p,{className:"w-8 text-gray-700 hover:text-red-500 hover:cursor-pointer",onClick:()=>g(t.id)})})]},t.id))})]})},v=w;export{v as default};
