import{a as r,b as x}from"/build/_shared/chunk-PPBDNHAV.js";import{a as m}from"/build/_shared/chunk-KYDY7OPM.js";import{c as f,d,g as b,i as c}from"/build/_shared/chunk-EFPPQYLK.js";import{b as j}from"/build/_shared/chunk-PD3RXK5I.js";import{d as a,i as u,l as g}from"/build/_shared/chunk-PBKUEGQN.js";import{a as W}from"/build/_shared/chunk-GLJNN66F.js";import{c as i}from"/build/_shared/chunk-Q3IECNXJ.js";var w=i(W(),1);var I=i(j(),1);var e=i(g(),1);var F=()=>{let{workflows:s,companyId:y}=u(),[l,h]=(0,w.useState)(null),N=t=>{h(l===t?null:t)},v=async t=>{if(confirm("Are you sure you want to delete this workflow?"))try{if((await fetch("/deleteWorkflow",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`workflowId=${t}`})).ok)r.success("Workflow deleted successfully!"),window.location.reload();else throw new Error("Failed to delete workflow")}catch(o){console.error("Error deleting workflow:",o),r.error("Failed to delete workflow")}},p=async(t,{action:o,subject:k,body:C,recipients:S})=>{try{let n=await fetch("/updateWorkflow",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workflowId:t,companyId:y,action:o,subject:k,body:C,recipients:S})});if(!n.ok)throw new Error("Failed to update workflow");let T=await n.json();r.success(T.message)}catch(n){console.error("Error updating workflow:",n),r.error("Failed to update workflow")}},A=()=>(0,e.jsx)(a,{to:"/wizard",children:(0,e.jsx)("button",{className:"bg-blue-500 text-white py-2 px-4 rounded-full hover:bg-blue-600 transition duration-200",children:"Create workflow"})});return(0,e.jsxs)(E,{children:[(0,e.jsx)(x,{}),s.length===0?(0,e.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 bg-white shadow-lg rounded-lg",children:[(0,e.jsx)(c,{className:"w-16 h-16 text-gray-400 mb-4"}),(0,e.jsx)("p",{className:"text-gray-500 mb-2",children:"No workflows available yet."}),(0,e.jsx)("p",{className:"text-gray-400 mb-6",children:"Send automated custom emails, SMS alerts, Webhook API notifications, and much more."})]}):s.map(t=>(0,e.jsxs)("div",{className:"shadow-lg rounded-lg mb-4",children:[(0,e.jsxs)("button",{onClick:()=>N(t.id),className:"flex justify-between items-center w-full p-4 bg-white rounded-lg hover:bg-gray-50 transition duration-200",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)(c,{className:"mr-4 w-6 h-6 text-blue-500"}),(0,e.jsxs)("div",{className:"text-left",children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:t.name}),(0,e.jsxs)("p",{className:"text-sm text-gray-500",children:["Trigger: ",t.trigger]}),(0,e.jsxs)("p",{className:"text-sm text-gray-500",children:["Action: ",t.action]})]})]}),(0,e.jsx)("div",{className:"text-gray-500",children:l===t.id?"-":"+"})]}),l===t.id&&(0,e.jsxs)("div",{className:"p-4 bg-gray-50 border-t",children:[t.action==="email"&&(0,e.jsx)(m,{action:"email",initialData:JSON.parse(t.settings).emailTemplate||{subject:"",body:"",recipients:""},onContinue:o=>p(t.id,o),buttonText:"Save Changes"}),t.action==="sms"&&(0,e.jsx)(m,{action:"sms",initialData:JSON.parse(t.settings).smsTemplate||{body:"",recipients:""},onContinue:o=>p(t.id,o),buttonText:"Save Changes"}),(0,e.jsx)("div",{className:"flex justify-end mt-4",children:(0,e.jsx)(b,{className:"w-6 h-6 text-gray-700 hover:text-red-500 cursor-pointer",onClick:()=>v(t.id)})})]})]},t.id))]})},L=()=>(0,e.jsx)(a,{to:"/wizard",children:(0,e.jsx)("button",{className:"bg-blue-500 text-white py-2 px-4 rounded-full hover:bg-blue-600 transition duration-200",children:"Create workflow"})}),E=({children:s})=>(0,e.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"EntroNoona Workflows"}),(0,e.jsxs)("div",{className:"flex gap-1",children:[(0,e.jsx)(a,{to:"/scheduled",children:(0,e.jsxs)("button",{className:"flex border-2 rounded-xl p-2 hover:bg-gray-300 text-sm items-center gap-1 w-[120px] justify-center",children:[(0,e.jsx)(f,{className:"w-4"})," Scheduled"]})}),(0,e.jsx)(a,{to:"/sent",children:(0,e.jsxs)("button",{className:"flex border-2 rounded-xl p-2 hover:bg-gray-300 text-sm items-center gap-1 w-[120px] justify-center",children:[(0,e.jsx)(d,{className:"w-4"})," Sent"]})}),(0,e.jsx)(a,{to:"/log",children:(0,e.jsxs)("button",{className:"flex border-2 rounded-xl p-2 hover:bg-gray-300 text-sm items_center gap-1 w-[120px] justify-center",children:[(0,e.jsx)(d,{className:"w-4"})," View Log"]})}),(0,e.jsx)(L,{})]})]}),s]}),O=F;export{O as default};
