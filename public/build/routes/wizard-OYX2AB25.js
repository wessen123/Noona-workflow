import{a as _}from"/build/_shared/chunk-KYDY7OPM.js";import{b as D,f as W,h as K}from"/build/_shared/chunk-EFPPQYLK.js";import{a as m,b as Te}from"/build/_shared/chunk-PD3RXK5I.js";import{c as L,e as F,i as B,l as s}from"/build/_shared/chunk-PBKUEGQN.js";import{a as h}from"/build/_shared/chunk-GLJNN66F.js";import{c as t}from"/build/_shared/chunk-Q3IECNXJ.js";var g=t(h(),1);var H=t(h(),1);var T=t(s(),1),Ee=({onContinue:l})=>{let[e,o]=(0,H.useState)("");return(0,T.jsx)(m,{onContinue:()=>l(e),question:"Select a trigger for the workflow",buttonText:"Continue",children:(0,T.jsxs)("div",{className:"relative",children:[(0,T.jsxs)("select",{value:e,onChange:c=>o(c.target.value),className:"block appearance-none w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400",children:[(0,T.jsx)("option",{value:"",children:"Select an option"}),(0,T.jsx)("option",{value:"APPOINTMENT_BOOKED",children:"When an appointment is booked"}),(0,T.jsx)("option",{value:"TIME_BEFORE_APPOINTMENT",children:"Time interval before an appointment"}),(0,T.jsx)("option",{value:"TIME_AFTER_APPOINTMENT",children:"Time interval after an appointment"}),(0,T.jsx)("option",{value:"NEW_CUSTOMER",children:"New customer is created"}),(0,T.jsx)("option",{value:"TRANSACTION_CREATED",children:"Transaction is created"})]}),(0,T.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:(0,T.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,T.jsx)("path",{d:"M7 10l5 5 5-5H7z"})})})]})})},G=Ee;var z=t(h(),1);var I=t(s(),1),pe=({text:l,checked:e,onChange:o})=>(0,I.jsxs)("div",{className:"flex items-center my-2 border rounded p-4 hover:bg-gray-100",children:[(0,I.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-600",checked:e,onChange:o}),(0,I.jsx)("span",{className:"ml-2",children:l})]}),b=pe;var v=t(s(),1),ue=({onContinue:l})=>{let[e,o]=(0,z.useState)([]),p=c=>{o(n=>n.includes(c)?n.filter(i=>i!==c):[...n,c])};return(0,v.jsx)(m,{onContinue:()=>l(e),question:"Select products",children:(0,v.jsxs)("div",{className:"relative p-4",children:[(0,v.jsx)(b,{text:"Product A",checked:e.includes("Product A"),onChange:()=>p("Product A")}),(0,v.jsx)(b,{text:"Product B",checked:e.includes("Product B"),onChange:()=>p("Product B")})]})})},Y=ue;var q=t(h(),1);var O=t(s(),1),de=({onContinue:l,eventTypes:e})=>{let[o,p]=(0,q.useState)([]),c=n=>{p(i=>i.includes(n)?i.filter(N=>N!==n):[...i,n])};return(0,O.jsx)(m,{onContinue:()=>l(o),question:"Select service types",buttonText:"Continue",children:(0,O.jsx)("div",{className:"relative p-4",children:e.map(n=>(0,O.jsx)(b,{text:n.title,checked:o.includes(n.id),onChange:()=>c(n.id)},n.id))})})},U=de;var J=t(h(),1);var y=t(s(),1),ge=({onContinue:l})=>{let[e,o]=(0,J.useState)("");return(0,y.jsx)(m,{question:"Workflow name",onContinue:()=>l(e),buttonText:"Continue",children:(0,y.jsx)("div",{className:"p-4",children:(0,y.jsx)("input",{type:"text",autoFocus:!0,value:e,onChange:c=>{o(c.target.value)},placeholder:"Enter workflow name",className:"border-2 h-12 p-2 w-full rounded-md"})})})},$=ge;var P=t(s(),1),Ne=()=>(0,P.jsx)(m,{question:"Not implemented",onContinue:()=>{},children:(0,P.jsx)("div",{className:"p-4",children:"No view for this feature yet."})}),X=Ne;var R=t(h(),1);var E=t(s(),1),Ce=({text:l,onContinue:e})=>{let[o,p]=(0,R.useState)(1),[c,n]=(0,R.useState)(0),[i,N]=(0,R.useState)(0),f=C=>p(Number(C.target.value)),M=C=>n(Number(C.target.value)),w=C=>N(Number(C.target.value)),A=`How many days/hours/minutes ${l} the appointment should the workflow run?`;return(0,E.jsx)(m,{onContinue:()=>e({days:o,hours:c,minutes:i}),question:A,children:(0,E.jsxs)("div",{className:"flex space-x-4 p-8",children:[(0,E.jsxs)("div",{className:"flex flex-col",children:[(0,E.jsx)("label",{htmlFor:"days",className:"text-gray-700 mb-1",children:"Days"}),(0,E.jsx)("input",{type:"number",id:"days",name:"days",className:"w-full bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400",value:o,onChange:f})]}),(0,E.jsxs)("div",{className:"flex flex-col",children:[(0,E.jsx)("label",{htmlFor:"hours",className:"text-gray-700 mb-1",children:"Hours"}),(0,E.jsx)("input",{type:"number",id:"hours",name:"hours",className:"w-full bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400",value:c,onChange:M})]}),(0,E.jsxs)("div",{className:"flex flex-col",children:[(0,E.jsx)("label",{htmlFor:"minutes",className:"text-gray-700 mb-1",children:"Minutes"}),(0,E.jsx)("input",{type:"number",id:"minutes",name:"minutes",className:"w-full bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400",value:i,onChange:w})]})]})})},k=Ce;var Q=t(h(),1);var u=t(s(),1),Se=[{id:"email",icon:(0,u.jsx)(D,{}),text:"Send custom email"},{id:"sms",icon:(0,u.jsx)(W,{}),text:"Send SMS message"},{id:"webhook",icon:(0,u.jsx)(K,{}),text:"Trigger Entro webhook"}],he=({onContinue:l,actions:e})=>{let[o,p]=(0,Q.useState)(null),c=i=>p(i),n=Se.filter(i=>e.includes(i.id));return(0,u.jsx)(m,{question:"Choose an action",onContinue:()=>l(o),buttonText:"Continue",children:(0,u.jsx)("div",{className:"grid grid-cols-3 gap-4 p-8",children:n.map((i,N)=>(0,u.jsx)("div",{className:`border hover:bg-gray-100 transition border-gray-300 rounded-lg ${o===i.id?"border-2 border-gray-700":""}`,onClick:()=>c(i.id),children:(0,u.jsx)(ve,{icon:i.icon,text:i.text})},N))})})},ve=({icon:l,text:e})=>(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 w-25 h-[150px] cursor-pointer",children:[(0,u.jsx)("div",{className:"text-gray-700 my-4",children:l}),(0,u.jsx)("div",{className:"text-gray-700 text-center text-sm",children:e})]}),Z=he;var j=t(Te(),1);var r=t(s(),1);var fe=()=>{let[l,e]=(0,g.useState)("SELECT_NAME"),[o,p]=(0,g.useState)(null),[c,n]=(0,g.useState)({}),[i,N]=(0,g.useState)(""),[f,M]=(0,g.useState)(null),[w,A]=(0,g.useState)(!1),{companyId:C,eventTypes:ee}=B(),te=(()=>o?{["APPOINTMENT_BOOKED"]:["email","sms","webhook"],["TIME_BEFORE_APPOINTMENT"]:["email","sms","webhook"],["TIME_AFTER_APPOINTMENT"]:["email","sms","webhook"],["NEW_CUSTOMER"]:["email","sms","webhook"],["TRANSACTION_CREATED"]:["email","sms","webhook"],["STOCK_LOW"]:["email","sms","zapier","webhook"]}[o]:[])(),oe=a=>{p(a);let S={["APPOINTMENT_BOOKED"]:"SELECT_SERVICE_TYPE",["TIME_BEFORE_APPOINTMENT"]:"SELECT_SERVICE_TYPE",["TIME_AFTER_APPOINTMENT"]:"SELECT_SERVICE_TYPE",["NEW_CUSTOMER"]:"ACTIONS",["TRANSACTION_CREATED"]:"ACTIONS",["STOCK_LOW"]:"SELECT_STOCK"}[a]||"NOT_IMPLEMENTED";e(S)},ne=a=>{let d={["TIME_BEFORE_APPOINTMENT"]:"INTERVAL_BEFORE_EVENT",["TIME_AFTER_APPOINTMENT"]:"INTERVAL_AFTER_EVENT",["APPOINTMENT_BOOKED"]:"ACTIONS"};n(me=>({...me,serviceType:a}));let S=o?d[o]:"ACTIONS";e(S)},ie=a=>{M(a);let S={email:"EMAIL",sms:"SMS",webhook:"WEBHOOK"}[a]||"NOT_IMPLEMENTED";e(S)},V=a=>{n(d=>({...d,interval:a})),e("ACTIONS")},x=a=>{let d=f==="email"?"emailTemplate":f==="sms"?"smsTemplate":"webhookTemplate";n(S=>({...S,[d]:a})),A(!0)};(0,g.useEffect)(()=>{w&&(se(),A(!1))},[w]);let re=a=>{n(d=>({...d,stock:a})),e("ACTIONS")},ae=L(),se=()=>{let a=document.getElementById("wizard-form");ae(a)},le=a=>{N(a),e("SELECT_TRIGGER")},ce={["SELECT_NAME"]:(0,r.jsx)($,{onContinue:le}),["SELECT_TRIGGER"]:(0,r.jsx)(G,{onContinue:oe}),["SELECT_SERVICE_TYPE"]:(0,r.jsx)(U,{onContinue:ne,eventTypes:ee}),["SELECT_STOCK"]:(0,r.jsx)(Y,{onContinue:re}),["INTERVAL_BEFORE_EVENT"]:(0,r.jsx)(k,{text:"before",onContinue:V}),["INTERVAL_AFTER_EVENT"]:(0,r.jsx)(k,{text:"after",onContinue:V}),["ACTIONS"]:(0,r.jsx)(Z,{actions:te,onContinue:ie}),["EMAIL"]:(0,r.jsx)(_,{action:"email",initialData:{subject:"",body:"",recipients:""},onContinue:x,buttonText:"Continue"}),["SMS"]:(0,r.jsx)(_,{action:"sms",initialData:{body:"",recipients:""},onContinue:x,buttonText:"Continue"}),["WEBHOOK"]:(0,r.jsx)(_,{action:"webhook",initialData:{body:""},onContinue:x,buttonText:"Continue"}),["NOT_IMPLEMENTED"]:(0,r.jsx)(X,{})};return(0,r.jsxs)(F,{method:"POST",id:"wizard-form",action:"/wizard",children:[(0,r.jsx)("input",{type:"hidden",name:"trigger",value:o||""}),(0,r.jsx)("input",{type:"hidden",name:"action",value:f||""}),(0,r.jsx)("input",{type:"hidden",name:"name",value:i||""}),(0,r.jsx)("input",{type:"hidden",name:"settings",value:JSON.stringify(c)}),(0,r.jsx)("input",{type:"hidden",name:"companyId",value:C||""}),ce[l]]})},Ie=fe;export{Ie as default};
