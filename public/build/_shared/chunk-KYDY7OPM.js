import{a as w}from"/build/_shared/chunk-PD3RXK5I.js";import{l as f}from"/build/_shared/chunk-PBKUEGQN.js";import{a as k}from"/build/_shared/chunk-GLJNN66F.js";import{c as d}from"/build/_shared/chunk-Q3IECNXJ.js";var i=d(k(),1);var x=d(k(),1),h=d(f(),1),S=({value:o,onChange:r})=>{let[u,v]=(0,x.useState)(null);return(0,x.useEffect)(()=>{(async()=>{let{default:n}=await import("/build/_shared/lib-EOHUIOAQ.js");v(()=>n)})()},[]),(0,h.jsx)("div",{children:u?(0,h.jsx)(u,{className:"hover:border-gray-500 rounded shadow leading-tight focus:outline-none focus:shadow-outline",value:o,onChange:n=>{r(n)},modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike","blockquote"],[{script:"sub"},{script:"super"}],[{color:[]},{background:[]}],[{align:[]}],["link","image","video"],["clean"]]},formats:["header","font","list","bullet","bold","italic","underline","strike","blockquote","script","color","background","align","link","image","video"]}):(0,h.jsx)("p",{children:"Loading editor..."})})},C=S;var t=d(f(),1),T=({initialData:o={subject:"",body:"",recipients:""},action:r,onContinue:u,buttonText:v})=>{let[b,m]=(0,i.useState)(o.subject||""),[g,n]=(0,i.useState)(o.body||""),[a,p]=(0,i.useState)(o.recipients?.split(",").map(e=>e.trim())||[]),[c,y]=(0,i.useState)("");(0,i.useEffect)(()=>{m(o.subject||""),n(o.body||""),p(o.recipients?.split(",").map(e=>e.trim())||[])},[o]);let N=e=>{e.preventDefault(),u({action:r,subject:b,body:g,recipients:a.join(", ")})},l=(e,s)=>{s==="subject"?m(b+` {{${e}}}`):s==="body"?n(g+` {{${e}}}`):s==="recipients"&&p([...a,`{{${e}}}`])},R=e=>{(e.key==="Enter"||e.key===",")&&(e.preventDefault(),c.trim()&&(r==="email"&&c.includes("@")?(p([...a,c.trim()]),y("")):r==="sms"&&j(c.trim())&&(p([...a,c.trim()]),y(""))))},j=e=>{let s=/^(?:\+251|251|0)?[1-9]\d{8}$/,F=/^(?:\+354|354)?\d{7}$/;return s.test(e)||F.test(e)},E=e=>{p(a.filter(s=>s!==e))},P=e=>e==="{{customerEmail}}"?"customer email":e==="{{customerPhone}}"?"customer phone":e;return(0,t.jsx)(w,{question:`Create a ${r.toUpperCase()} Template`,onContinue:N,buttonText:v,children:(0,t.jsxs)("form",{onSubmit:N,className:"flex flex-col h-full",children:[r==="email"&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"recipients",children:"Recipients:"}),(0,t.jsxs)("div",{className:"block w-full bg-white border border-gray-300 rounded-lg py-2 px-3 shadow-sm focus:outline-none focus:ring focus:border-blue-300",children:[a.map((e,s)=>(0,t.jsxs)("span",{className:"inline-flex items-center bg-blue-500 text-white font-semibold rounded-[20px] cursor-pointer text-sm px-3 py-1 mr-2 mb-2",children:[P(e),(0,t.jsx)("span",{onClick:()=>E(e),className:"ml-2 text-red-500 hover:text-red-700 cursor-pointer",children:"\xD7"})]},s)),(0,t.jsx)("input",{type:"text",value:c,onChange:e=>y(e.target.value),onKeyDown:R,className:"border-none outline-none focus:ring-0",placeholder:"Add recipient and press enter (email)"})]}),(0,t.jsx)("div",{className:"mt-2 flex gap-2",children:(0,t.jsx)("span",{onClick:()=>l("customerEmail","recipients"),className:"bg-blue-500 text-white font-semibold rounded-[20px] cursor-pointer text-sm hover:bg-blue-600 px-3 py-1",children:"add customer email"})})]}),r==="email"&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"subject",children:"Subject:"}),(0,t.jsx)("input",{type:"text",id:"subject",value:b,onChange:e=>m(e.target.value),className:"block w-full bg-white border border-gray-300 rounded-lg py-2 px-3 shadow-sm focus:outline-none focus:ring focus:border-blue-300",placeholder:"Enter email subject"}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,t.jsx)("span",{onClick:()=>l("code","subject"),className:"bg-blue-500 text-white font-semibold rounded-[20px] cursor-pointer text-sm hover:bg-blue-600 px-3 py-1",children:"code"}),(0,t.jsx)("span",{onClick:()=>l("customerEmail","subject"),className:"bg-blue-500 text-white font-semibold rounded-[20px] cursor-pointer text-sm hover:bg-blue-600 px-3 py-1",children:"email"}),(0,t.jsx)("span",{onClick:()=>m(""),className:"bg-red-500 text-white font-semibold rounded-[20px] cursor-pointer text-sm hover:bg-red-600 px-3 py-1",children:"remove all"})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"body",children:"Body:"}),(0,t.jsx)("div",{className:"border border-gray-300 rounded-lg overflow-hidden h-full",children:(0,t.jsx)(C,{value:g,onChange:n,className:"h-full",placeholder:"Enter message body"})}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,t.jsx)("span",{onClick:()=>l("code","body"),className:"bg-blue-500 text-white font-semibold rounded-[20px] cursor-pointer text-sm hover:bg-blue-600 px-3 py-1",children:"code"}),(0,t.jsx)("span",{onClick:()=>l("customerEmail","body"),className:"bg-blue-500 text-white font-semibold rounded-[20px] cursor-pointer text-sm hover:bg-blue-600 px-3 py-1",children:"email"}),(0,t.jsx)("span",{onClick:()=>l("customerName","body"),className:"bg-blue-500 text-white font-semibold rounded-[20px] cursor-pointer text-sm hover:bg-blue-600 px-3 py-1",children:"name"}),(0,t.jsx)("span",{onClick:()=>l("customerPhone","body"),className:"bg-blue-500 text-white font-semibold rounded-[20px] cursor-pointer text-sm hover:bg-blue-600 px-3 py-1",children:"phone"}),(0,t.jsx)("span",{onClick:()=>n(""),className:"bg-red-500 text-white font-semibold rounded-[20px] cursor-pointer text-sm hover:bg-red-600 px-3 py-1",children:"remove all"})]})]})]})})},L=T;export{L as a};
